<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>امتحني شكراً</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f2f2f2;
            padding: 20px;
            direction: rtl;
            text-align: right;
        }

        .container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            max-width: 700px;
            margin: auto;
            box-shadow: 0px 0px 10px #ccc;
        }

        h1, h2 {
            text-align: center;
        }

        img.logo {
            display: block;
            margin: auto;
            width: 120px;
        }

        .question {
            margin-top: 20px;
            padding: 15px;
            background: #fafafa;
            border-radius: 8px;
        }

        button {
            padding: 10px 20px;
            margin-top: 20px;
            cursor: pointer;
        }

        .correct { color: green; font-weight: bold; }
        .wrong { color: red; font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    <img src="1.jpg" class="logo" alt="Logo">

    <h1>امتحني شكراً</h1>
    <h2>إنشاء امتحان جديد</h2>

    <div>
        <label>السؤال:</label>
        <input type="text" id="questionText" style="width:100%">
        <br><br>

        <label>الإجابات الأربعة:</label>
        <input placeholder="اختيار 1" id="c1" style="width:100%"><br><br>
        <input placeholder="اختيار 2" id="c2" style="width:100%"><br><br>
        <input placeholder="اختيار 3" id="c3" style="width:100%"><br><br>
        <input placeholder="اختيار 4" id="c4" style="width:100%"><br><br>

        <label>الاختيار الصحيح (1 - 4):</label>
        <input type="number" id="correct" min="1" max="4">

        <button onclick="addQuestion()">إضافة السؤال</button>
    </div>

    <hr>

    <h2>الأسئلة المضافة</h2>
    <div id="questionsList"></div>

    <button onclick="startExam()">بدء الامتحان</button>

    <div id="examArea"></div>

</div>

<script>
    let questions = [];

    // تحميل الأسئلة من التخزين
    if (localStorage.getItem("exam_questions")) {
        questions = JSON.parse(localStorage.getItem("exam_questions"));
        displayQuestions();
    }

    function addQuestion() {
        let q = document.getElementById("questionText").value;
        let c1 = document.getElementById("c1").value;
        let c2 = document.getElementById("c2").value;
        let c3 = document.getElementById("c3").value;
        let c4 = document.getElementById("c4").value;
        let correct = document.getElementById("correct").value;

        if (!q || !c1 || !c2 || !c3 || !c4 || !correct) {
            alert("اكمل كل الحقول");
            return;
        }

        questions.push({
            question: q,
            choices: [c1, c2, c3, c4],
            correct: Number(correct)
        });

        localStorage.setItem("exam_questions", JSON.stringify(questions));

        displayQuestions();

        document.getElementById("questionText").value = "";
        document.getElementById("c1").value = "";
        document.getElementById("c2").value = "";
        document.getElementById("c3").value = "";
        document.getElementById("c4").value = "";
        document.getElementById("correct").value = "";
    }

    function displayQuestions() {
        let list = document.getElementById("questionsList");
        list.innerHTML = "";

        questions.forEach((q, i) => {
            list.innerHTML += `
            <div class="question">
                <b>سؤال ${i+1}:</b> ${q.question}<br>
                - ${q.choices[0]}<br>
                - ${q.choices[1]}<br>
                - ${q.choices[2]}<br>
                - ${q.choices[3]}<br>
                <span class="correct">✔ الإجابة الصحيحة: ${q.correct}</span>
            </div>
            `;
        });
    }

    function startExam() {
        let exam = document.getElementById("examArea");
        exam.innerHTML = "<h2>الامتحان</h2>";

        questions.forEach((q, i) => {
            exam.innerHTML += `
            <div class="question">
                <b>${q.question}</b><br>
                <input type="radio" name="q${i}" value="1"> ${q.choices[0]}<br>
                <input type="radio" name="q${i}" value="2"> ${q.choices[1]}<br>
                <input type="radio" name="q${i}" value="3"> ${q.choices[2]}<br>
                <input type="radio" name="q${i}" value="4"> ${q.choices[3]}<br>
            </div>
            `;
        });

        exam.innerHTML += `<button onclick="finishExam()">إنهاء الامتحان</button>`;
    }

    function finishExam() {
        let score = 0;

        questions.forEach((q, i) => {
            let ans = document.querySelector(`input[name="q${i}"]:checked`);
            if (ans && Number(ans.value) === q.correct) {
                score++;
            }
        });

        alert("درجتك هي: " + score + " من " + questions.length);
    }
</script>

</body>
</html>
