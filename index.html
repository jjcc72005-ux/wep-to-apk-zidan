<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zidan Test - Ø¹Ø±Ø¶ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†</title>
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2c3e50;
            --accent-color: #e74c3c;
            --light-color: #ecf0f1;
            --dark-color: #34495e;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
            background-image: url('1.jpg');
            background-size: cover;
            background-attachment: fixed;
        }
        
        .overlay {
            background-color: rgba(255, 255, 255, 0.95);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        header {
            background-color: var(--secondary-color);
            color: white;
            padding: 1rem 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        .logo {
            display: flex;
            align-items: center;
        }
        
        .logo h1 {
            font-size: 1.8rem;
            margin-right: 10px;
        }
        
        .logo-icon {
            font-size: 2rem;
            color: var(--primary-color);
        }
        
        .timer {
            background-color: var(--accent-color);
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
        }
        
        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 20px;
            flex: 1;
            display: flex;
        }
        
        .exam-info {
            flex: 1;
            background-color: white;
            border-radius: 8px;
            padding: 2rem;
            box-shadow: 0 0 15px rgba(0,0,0,0.1);
            margin-left: 2rem;
        }
        
        .exam-cover {
            width: 100%;
            height: 200px;
            background-color: #eee;
            border-radius: 8px;
            margin-bottom: 1rem;
            background-size: cover;
            background-position: center;
        }
        
        .exam-details h2 {
            color: var(--dark-color);
            margin-bottom: 1rem;
        }
        
        .exam-details p {
            margin-bottom: 0.5rem;
        }
        
        .questions-container {
            flex: 2;
            background-color: white;
            border-radius: 8px;
            padding: 2rem;
            box-shadow: 0 0 15px rgba(0,0,0,0.1);
        }
        
        .question-card {
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid #eee;
        }
        
        .question-text {
            font-size: 1.2rem;
            margin-bottom: 1rem;
            color: var(--dark-color);
        }
        
        .options-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }
        
        .option-label {
            display: flex;
            align-items: center;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .option-label:hover {
            background-color: #f9f9f9;
        }
        
        .option-label.selected {
            background-color: #e1f5fe;
            border-color: var(--primary-color);
        }
        
        .option-label input {
            margin-left: 10px;
        }
        
        .actions {
            display: flex;
            justify-content: space-between;
            margin-top: 2rem;
        }
        
        .btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            transition: background-color 0.3s;
        }
        
        .btn:hover {
            background-color: #2980b9;
        }
        
        .btn-finish {
            background-color: var(--accent-color);
        }
        
        .btn-finish:hover {
            background-color: #c0392b;
        }
        
        .result-container {
            background-color: white;
            border-radius: 8px;
            padding: 2rem;
            box-shadow: 0 0 15px rgba(0,0,0,0.1);
            text-align: center;
            display: none;
        }
        
        .result-score {
            font-size: 3rem;
            color: var(--primary-color);
            margin: 1rem 0;
        }
        
        .result-details {
            margin-top: 2rem;
            text-align: right;
        }
        
        .result-item {
            padding: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .correct {
            color: #27ae60;
        }
        
        .incorrect {
            color: #e74c3c;
        }
        
        footer {
            background-color: var(--secondary-color);
            color: white;
            text-align: center;
            padding: 1rem 0;
            margin-top: 2rem;
        }
        
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }
            
            .exam-info {
                margin-left: 0;
                margin-bottom: 2rem;
            }
            
            .options-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="overlay">
        <header>
            <div class="header-container">
                <div class="logo">
                    <span class="logo-icon">ğŸ“</span>
                    <h1>Zidan Test</h1>
                </div>
                <div class="timer" id="timer">--:--</div>
            </div>
        </header>

        <div class="container">
            <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø§Ù…ØªØ­Ø§Ù† -->
            <div class="exam-info">
                <div class="exam-cover" id="exam-cover"></div>
                <div class="exam-details">
                    <h2 id="exam-title">Ø§Ø³Ù… Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†</h2>
                    <p id="exam-description">ÙˆØµÙ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†</p>
                    <p><strong>Ø§Ù„Ù…Ø¯Ø©:</strong> <span id="exam-duration">--</span> Ø¯Ù‚ÙŠÙ‚Ø©</p>
                    <p><strong>Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©:</strong> <span id="questions-count">0</span></p>
                </div>
            </div>

            <!-- Ø§Ù„Ø£Ø³Ø¦Ù„Ø© -->
            <div class="questions-container" id="questions-container">
                <div id="questions-list">
                    <!-- Ø³ÙŠØªÙ… Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ù‡Ù†Ø§ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
                </div>
                
                <div class="actions">
                    <button class="btn" id="prev-btn" disabled>Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
                    <button class="btn" id="next-btn">Ø§Ù„ØªØ§Ù„ÙŠ</button>
                    <button class="btn btn-finish" id="finish-btn">Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†</button>
                </div>
            </div>

            <!-- Ø§Ù„Ù†ØªÙŠØ¬Ø© -->
            <div class="result-container" id="result-container">
                <h2>Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†</h2>
                <div class="result-score" id="result-score">0/0</div>
                <p id="result-message">Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù†ØªÙŠØ¬Ø©</p>
                
                <div class="result-details" id="result-details">
                    <!-- ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù†ØªÙŠØ¬Ø© -->
                </div>
                
                <button class="btn" id="retry-btn">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©</button>
            </div>
        </div>

        <footer>
            <p>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© &copy; 2023 Zidan Test</p>
        </footer>
    </div>

    <script>
        // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†
        let currentExam = null;
        let userAnswers = [];
        let currentQuestionIndex = 0;
        let timerInterval = null;
        let timeLeft = 0;

        // Ø¹Ù†Ø§ØµØ± DOM
        const examTitle = document.getElementById('exam-title');
        const examDescription = document.getElementById('exam-description');
        const examDuration = document.getElementById('exam-duration');
        const questionsCount = document.getElementById('questions-count');
        const examCover = document.getElementById('exam-cover');
        const questionsList = document.getElementById('questions-list');
        const questionsContainer = document.getElementById('questions-container');
        const resultContainer = document.getElementById('result-container');
        const resultScore = document.getElementById('result-score');
        const resultMessage = document.getElementById('result-message');
        const resultDetails = document.getElementById('result-details');
        const timerElement = document.getElementById('timer');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const finishBtn = document.getElementById('finish-btn');
        const retryBtn = document.getElementById('retry-btn');

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†
        function loadExam() {
            const exams = JSON.parse(localStorage.getItem('zidanExams')) || [];
            
            if (exams.length === 0) {
                questionsList.innerHTML = '<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø§Ù…ØªØ­Ø§Ù†Ø§Øª Ù…ØªØ§Ø­Ø©</p>';
                return;
            }
            
            // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø£ÙˆÙ„ Ø§Ù…ØªØ­Ø§Ù† Ù…ØªØ§Ø­ (ÙŠÙ…ÙƒÙ† ØªØ¹Ø¯ÙŠÙ„ Ù‡Ø°Ø§ Ù„Ø§Ø®ØªÙŠØ§Ø± Ø§Ù…ØªØ­Ø§Ù† Ù…Ø¹ÙŠÙ†)
            currentExam = exams[0];
            
            if (!currentExam || currentExam.questions.length === 0) {
                questionsList.innerHTML = '<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø³Ø¦Ù„Ø© ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†</p>';
                return;
            }
            
            // ØªØ¹Ø¨Ø¦Ø© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†
            examTitle.textContent = currentExam.name;
            examDescription.textContent = currentExam.description || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ';
            examDuration.textContent = currentExam.duration;
            questionsCount.textContent = currentExam.questions.length;
            
            if (currentExam.cover) {
                examCover.style.backgroundImage = `url(${currentExam.cover})`;
            }
            
            // ØªÙ‡ÙŠØ¦Ø© Ù…ØµÙÙˆÙØ© Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª
            userAnswers = new Array(currentExam.questions.length).fill(null);
            
            // Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø¤Ù‚Øª
            startTimer(parseInt(currentExam.duration) * 60);
            
            // Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©
            renderQuestion(currentQuestionIndex);
        }

        // Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø¤Ù‚Øª
        function startTimer(duration) {
            timeLeft = duration;
            updateTimerDisplay();
            
            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    finishExam();
                }
            }, 1000);
        }

        // ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø¤Ù‚Øª
        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            if (timeLeft < 300) { // Ø£Ù‚Ù„ Ù…Ù† 5 Ø¯Ù‚Ø§Ø¦Ù‚
                timerElement.style.backgroundColor = '#e74c3c';
            }
        }

        // Ø¹Ø±Ø¶ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ø­Ø§Ù„ÙŠ
        function renderQuestion(index) {
            if (!currentExam || index < 0 || index >= currentExam.questions.length) return;
            
            const question = currentExam.questions[index];
            
            let optionsHTML = '';
            question.options.forEach((option, i) => {
                const isSelected = userAnswers[index] === i;
                optionsHTML += `
                    <label class="option-label ${isSelected ? 'selected' : ''}">
                        <input type="radio" name="question-${index}" value="${i}" ${isSelected ? 'checked' : ''}>
                        ${option}
                    </label>
                `;
            });
            
            questionsList.innerHTML = `
                <div class="question-card">
                    <div class="question-text">${index + 1}. ${question.text}</div>
                    <div class="options-container">
                        ${optionsHTML}
                    </div>
                </div>
            `;
            
            // Ø¥Ø¶Ø§ÙØ© Ø£Ø­Ø¯Ø§Ø« Ù„Ù„Ø§Ø®ØªÙŠØ§Ø±Ø§Øª
            const optionLabels = questionsList.querySelectorAll('.option-label');
            optionLabels.forEach(label => {
                label.addEventListener('click', () => {
                    // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØªØ­Ø¯ÙŠØ¯ Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª
                    optionLabels.forEach(l => l.classList.remove('selected'));
                    
                    // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø®ÙŠØ§Ø± Ø§Ù„Ù…Ø®ØªØ§Ø±
                    label.classList.add('selected');
                    const selectedValue = parseInt(label.querySelector('input').value);
                    userAnswers[index] = selectedValue;
                });
            });
            
            // ØªØ­Ø¯ÙŠØ« Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªÙ†Ù‚Ù„
            prevBtn.disabled = index === 0;
            nextBtn.disabled = index === currentExam.questions.length - 1;
        }

        // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ
        nextBtn.addEventListener('click', () => {
            if (currentQuestionIndex < currentExam.questions.length - 1) {
                currentQuestionIndex++;
                renderQuestion(currentQuestionIndex);
            }
        });

        // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ø³Ø§Ø¨Ù‚
        prevBtn.addEventListener('click', () => {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                renderQuestion(currentQuestionIndex);
            }
        });

        // Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†
        finishBtn.addEventListener('click', () => {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†ØŸ')) {
                finishExam();
            }
        });

        // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©
        retryBtn.addEventListener('click', () => {
            location.reload();
        });

        // Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù† ÙˆØ¹Ø±Ø¶ Ø§Ù„Ù†ØªÙŠØ¬Ø©
        function finishExam() {
            clearInterval(timerInterval);
            
            // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù†ØªÙŠØ¬Ø©
            let correctAnswers = 0;
            currentExam.questions.forEach((question, index) => {
                if (userAnswers[index] === question.correct) {
                    correctAnswers++;
                }
            });
            
            const totalQuestions = currentExam.questions.length;
            const score = correctAnswers;
            const percentage = Math.round((correctAnswers / totalQuestions) * 100);
            
            // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªÙŠØ¬Ø©
            resultScore.textContent = `${score}/${totalQuestions}`;
            
            let message = '';
            if (percentage >= 90) {
                message = 'Ù…Ù…ØªØ§Ø²! Ø£Ø¯Ø§Ø¡ Ø±Ø§Ø¦Ø¹';
            } else if (percentage >= 80) {
                message = 'Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹! Ø£Ø­Ø³Ù†Øª';
            } else if (percentage >= 70) {
                message = 'Ø¬ÙŠØ¯! ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªØ­Ø³ÙŠÙ†';
            } else if (percentage >= 60) {
                message = 'Ù…Ù‚Ø¨ÙˆÙ„! ØªØ­ØªØ§Ø¬ Ù„Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ø¬Ù‡Ø¯';
            } else {
                message = 'Ø¶Ø¹ÙŠÙ! ÙŠØ¬Ø¨ Ø£Ù† ØªØ¯Ø±Ø³ Ø£ÙƒØ«Ø±';
            }
            
            resultMessage.textContent = message;
            
            // Ø¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù†ØªÙŠØ¬Ø©
            let detailsHTML = '';
            currentExam.questions.forEach((question, index) => {
                const userAnswer = userAnswers[index];
                const isCorrect = userAnswer === question.correct;
                
                detailsHTML += `
                    <div class="result-item">
                        <p><strong>Ø§Ù„Ø³Ø¤Ø§Ù„ ${index + 1}:</strong> ${question.text}</p>
                        <p class="${isCorrect ? 'correct' : 'incorrect'}">
                            <strong>Ø¥Ø¬Ø§Ø¨ØªÙƒ:</strong> ${userAnswer !== null ? question.options[userAnswer] : 'Ù„Ù… ØªØ¬Ø¨'}
                        </p>
                        ${!isCorrect ? `<p class="correct"><strong>Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©:</strong> ${question.options[question.correct]}</p>` : ''}
                    </div>
                `;
            });
            
            resultDetails.innerHTML = detailsHTML;
            
            // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© ÙˆØ¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù†ØªÙŠØ¬Ø©
            questionsContainer.style.display = 'none';
            resultContainer.style.display = 'block';
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù† Ø¹Ù†Ø¯ Ø¨Ø¯Ø¡ Ø§Ù„ØµÙØ­Ø©
        document.addEventListener('DOMContentLoaded', loadExam);
    </script>
</body>
</html>
